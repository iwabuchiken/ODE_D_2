<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>locmath.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.15 -->
<center>
<a href="http://www.alsprogrammingresource.com"><img src="../../../../images/als_programming_resource.jpg" alt="Al's Programming Resource Homepage" align="middle" border=0 width=88 height=31 /></a>&nbsp;<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>locmath.cpp</h1><a href="locmath_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <font class="preprocessor">#include &lt;windows.h&gt;</font>
00002 <font class="preprocessor">#include "<a class="code" href="shared_8h.html">shared.h</a>"</font>
00003 <font class="preprocessor">#include "<a class="code" href="locmath_8h.html">locmath.h</a>"</font>
00004 <font class="preprocessor">#include "<a class="code" href="vector_8h.html">vector.h</a>"</font>
00005 <font class="preprocessor">#include "<a class="code" href="quat_8h.html">quat.h</a>"</font>
00006 <font class="preprocessor">#include "<a class="code" href="vertex_8h.html">vertex.h</a>"</font>
00007 
00008 
<a name="l00009"></a><a class="code" href="locmath_8cpp.html#a0">00009</a> <font class="keywordtype">void</font> <a class="code" href="locmath_8cpp.html#a0">LoadIdentity</a>(<font class="keywordtype">float</font> m[])
00010 {
00011         m[0]=1.0f;
00012         m[1]=0.0f;
00013         m[2]=0.0f;
00014         m[3]=0.0f;
00015 
00016         m[4]=0.0f;
00017         m[5]=1.0f;
00018         m[6]=0.0f;
00019         m[7]=0.0f;
00020 
00021         m[8]=0.0f;
00022         m[9]=0.0f;
00023         m[10]=1.0f;
00024         m[11]=0.0f;
00025 
00026         m[12]=0.0f;
00027         m[13]=0.0f;
00028         m[14]=0.0f;
00029         m[15]=1.0f;
00030 }
00031 
<a name="l00032"></a><a class="code" href="locmath_8cpp.html#a1">00032</a> <font class="keywordtype">void</font> <a class="code" href="locmath_8cpp.html#a1">CopyMatrix</a>(<font class="keywordtype">float</font> m[], <font class="keywordtype">float</font> n[])
00033 {
00034         m[0 ] = n[0 ];
00035         m[1 ] = n[1 ];
00036         m[2 ] = n[2 ];
00037         m[3 ] = n[3 ];
00038         m[4 ] = n[4 ];
00039         m[5 ] = n[5 ];
00040         m[6 ] = n[6 ];
00041         m[7 ] = n[7 ];
00042         m[8 ] = n[8 ];
00043         m[9 ] = n[9 ];
00044         m[10] = n[10];
00045         m[11] = n[11];
00046         m[12] = n[12];
00047         m[13] = n[13];
00048         m[14] = n[14];
00049         m[15] = n[15];
00050 }
00051 
<a name="l00052"></a><a class="code" href="locmath_8cpp.html#a2">00052</a> <font class="keywordtype">void</font> <a class="code" href="locmath_8cpp.html#a2">MultMatrix</a>(<font class="keywordtype">float</font> m[], <font class="keywordtype">float</font> n[])
00053 {
00054         <font class="keywordtype">float</font> temp[16];
00055 
00056         <a class="code" href="locmath_8cpp.html#a1">CopyMatrix</a>(temp, m);
00057       m[0] = temp[0 ]*n[0 ]
00058                + temp[4 ]*n[1 ]
00059                + temp[8 ]*n[2 ]
00060                + temp[12]*n[3 ];
00061 
00062       m[1] = temp[1 ]*n[0 ]
00063                + temp[5 ]*n[1 ]
00064                + temp[9 ]*n[2 ]
00065                + temp[13]*n[3 ];
00066 
00067       m[2] = temp[2 ]*n[0 ]
00068                + temp[6 ]*n[1 ]
00069                + temp[10]*n[2 ]
00070                + temp[14]*n[3 ];
00071 
00072       m[3] = temp[3 ]*n[0 ]
00073                + temp[7 ]*n[1 ]
00074                + temp[11]*n[2 ]
00075                + temp[15]*n[3 ];
00076 
00077       m[4] = temp[0 ]*n[4 ]
00078                + temp[4 ]*n[5 ]
00079                + temp[8 ]*n[6 ]
00080                + temp[12]*n[7 ];
00081 
00082       m[5] = temp[1 ]*n[4 ]
00083                + temp[5 ]*n[5 ]
00084                + temp[9 ]*n[6 ]
00085                + temp[13]*n[7 ];
00086 
00087       m[6] = temp[2 ]*n[4 ]
00088                + temp[6 ]*n[5 ]
00089                + temp[10]*n[6 ]
00090                + temp[14]*n[7 ];
00091 
00092       m[7] = temp[3 ]*n[4 ]
00093                + temp[7 ]*n[5 ]
00094                + temp[11]*n[6 ]
00095                + temp[15]*n[7 ];
00096 
00097       m[8] = temp[0 ]*n[8 ]
00098                + temp[4 ]*n[9 ]
00099                + temp[8 ]*n[10]
00100                + temp[12]*n[11];
00101 
00102       m[9] = temp[1 ]*n[8 ]
00103                + temp[5 ]*n[9 ]
00104                + temp[9 ]*n[10]
00105                + temp[13]*n[11];
00106 
00107       m[10]= temp[2 ]*n[8 ]
00108                + temp[6 ]*n[9 ]
00109                + temp[10]*n[10]
00110                + temp[14]*n[11];
00111 
00112       m[11]= temp[3 ]*n[8 ]
00113                + temp[7 ]*n[9 ]
00114                + temp[11]*n[10]
00115                + temp[15]*n[11];
00116 
00117       m[12]= temp[0 ]*n[12]
00118                + temp[4 ]*n[13]
00119                + temp[8 ]*n[14]
00120                + temp[12]*n[15];
00121 
00122       m[13]= temp[1 ]*n[12]
00123                + temp[5 ]*n[13]
00124                + temp[9 ]*n[14]
00125                + temp[13]*n[15];
00126 
00127       m[14]= temp[2 ]*n[12]
00128                + temp[6 ]*n[13]
00129                + temp[10]*n[14]
00130                + temp[14]*n[15];
00131 
00132       m[15]= temp[3 ]*n[12]
00133                + temp[7 ]*n[13]
00134                + temp[11]*n[14]
00135                + temp[15]*n[15];
00136 }
00137 
<a name="l00138"></a><a class="code" href="locmath_8cpp.html#a3">00138</a> <font class="keywordtype">void</font> <a class="code" href="locmath_8cpp.html#a3">MatrixInverse</a>(<font class="keywordtype">float</font> m[])
00139 {
00140     <font class="keywordtype">float</font> n[16];
00141 
00142       <a class="code" href="locmath_8cpp.html#a1">CopyMatrix</a>(n, m);
00143       m[0 ] = n[0 ];
00144       m[1 ] = n[4 ];
00145       m[2 ] = n[8 ];
00146 
00147       m[4 ] = n[1 ];
00148       m[5 ] = n[5 ];
00149       m[6 ] = n[9 ];
00150 
00151       m[8 ] = n[2 ];
00152       m[9 ] = n[6 ];
00153       m[10] = n[10];
00154 
00155       m[12] *= -1.0f;
00156       m[13] *= -1.0f;
00157       m[14] *= -1.0f;
00158 }
00159 
00160     <font class="comment">/* The following routine converts an angle and a unit axis vector</font>
00161 <font class="comment">        * to a matrix, returning the corresponding unit quaternion at no</font>
00162 <font class="comment">        * extra cost. It is written in such a way as to allow both fixed</font>
00163 <font class="comment">        * point and floating point versions to be created by appropriate</font>
00164 <font class="comment">        * definitions of FPOINT, ANGLE, VECTOR, QUAT, MATRIX, MUL, HALF,</font>
00165 <font class="comment">        * TWICE, COS, SIN, ONE, and ZERO.</font>
00166 <font class="comment">        * The following is an example of floating point definitions.*/</font>
<a name="l00167"></a><a class="code" href="locmath_8cpp.html#a4">00167</a> <a class="code" href="classQUAT.html">QUAT</a> <a class="code" href="locmath_8cpp.html#a4">AxisAngleToMatrix</a>(<a class="code" href="classVECTOR.html">VECTOR</a> axis, <font class="keywordtype">float</font> theta, <font class="keywordtype">float</font> m[16])
00168 {
00169         <a class="code" href="classQUAT.html">QUAT</a> q;
00170         <font class="keywordtype">float</font> halfTheta = theta * 0.5;
00171         <font class="keywordtype">float</font> cosHalfTheta = cos(halfTheta);
00172         <font class="keywordtype">float</font> sinHalfTheta = sin(halfTheta);
00173         <font class="keywordtype">float</font> xs, ys, zs, wx, wy, wz, xx, xy, xz, yy, yz, zz;
00174         q.<a class="code" href="classQUAT.html#m0">x</a> = axis.<a class="code" href="classVECTOR.html#m0">x</a> * sinHalfTheta;
00175         q.<a class="code" href="classQUAT.html#m1">y</a> = axis.<a class="code" href="classVECTOR.html#m1">y</a> * sinHalfTheta;
00176         q.<a class="code" href="classQUAT.html#m2">z</a> = axis.<a class="code" href="classVECTOR.html#m2">z</a> * sinHalfTheta;
00177         q.<a class="code" href="classQUAT.html#m3">w</a> = cosHalfTheta;
00178         xs = q.<a class="code" href="classQUAT.html#m0">x</a> * 2;  ys = q.<a class="code" href="classQUAT.html#m1">y</a> * 2;  zs = q.<a class="code" href="classQUAT.html#m2">z</a> * 2;
00179         wx = q.<a class="code" href="classQUAT.html#m3">w</a> * xs; wy = q.<a class="code" href="classQUAT.html#m3">w</a> * ys; wz = q.<a class="code" href="classQUAT.html#m3">w</a> * zs;
00180         xx = q.<a class="code" href="classQUAT.html#m0">x</a> * xs; xy = q.<a class="code" href="classQUAT.html#m0">x</a> * ys; xz = q.<a class="code" href="classQUAT.html#m0">x</a> * zs;
00181         yy = q.<a class="code" href="classQUAT.html#m1">y</a> * ys; yz = q.<a class="code" href="classQUAT.html#m1">y</a> * zs; zz = q.<a class="code" href="classQUAT.html#m2">z</a> * zs;
00182         m[0] = 1 - (yy + zz);
00183         m[1] = xy - wz;
00184         m[2] = xz + wy;
00185         m[4] = xy + wz;
00186         m[5] = 1 - (xx + zz);
00187         m[6] = yz - wx;
00188         m[8] = xz - wy;
00189         m[9] = yz + wx;
00190         m[10] = 1 - (xx + yy);
00191         <font class="comment">/* Fill in remainder of 4x4 homogeneous transform matrix. */</font>
00192         m[12] = m[13] = m[14] = m[3] = m[7] = m[11] = 0;
00193         m[15] = 1;
00194         <font class="keywordflow">return</font> (q);
00195 }
00196 
<a name="l00197"></a><a class="code" href="locmath_8cpp.html#a5">00197</a> <font class="keywordtype">float</font> <a class="code" href="locmath_8cpp.html#a5">DotProduct</a>(<a class="code" href="classVECTOR.html">VECTOR</a> vec1, <a class="code" href="classVECTOR.html">VECTOR</a> vec2)
00198 {
00199     <font class="comment">/*</font>
00200 <font class="comment">    Dot Product of two Vectors.</font>
00201 <font class="comment"></font>
00202 <font class="comment">    U = (Ux, Uy, Uz)</font>
00203 <font class="comment">    V = (Vx, Vy, Vz)</font>
00204 <font class="comment">    U*V = UxVx + UyVy + UzVz</font>
00205 <font class="comment">    U*V = |U||V|cos(t) (where t is the angle theta between the two vectors)</font>
00206 <font class="comment">    */</font>
00207       <font class="keywordtype">float</font> dot;
00208       dot = vec1.<a class="code" href="classVECTOR.html#m0">x</a> * vec2.<a class="code" href="classVECTOR.html#m0">x</a> + vec1.<a class="code" href="classVECTOR.html#m1">y</a> * vec2.<a class="code" href="classVECTOR.html#m1">y</a> + vec1.<a class="code" href="classVECTOR.html#m2">z</a> * vec2.<a class="code" href="classVECTOR.html#m2">z</a>;
00209       <font class="keywordflow">return</font> dot;
00210 }
00211 
<a name="l00212"></a><a class="code" href="locmath_8cpp.html#a6">00212</a> <a class="code" href="classVECTOR.html">VECTOR</a> <a class="code" href="locmath_8cpp.html#a6">CrossVector</a>(<a class="code" href="classVECTOR.html">VECTOR</a> vec1, <a class="code" href="classVECTOR.html">VECTOR</a> vec2)
00213 {
00214     <font class="comment">/*</font>
00215 <font class="comment">    Cross Product of Two Vectors.</font>
00216 <font class="comment"></font>
00217 <font class="comment">    a × b = ( a.y * b.z - a.z * b.y,</font>
00218 <font class="comment"></font>
00219 <font class="comment">    a.z * b.x - a.x * b.z,</font>
00220 <font class="comment"></font>
00221 <font class="comment">    a.x * b.y - a.y * b.x )</font>
00222 <font class="comment"></font>
00223 <font class="comment">    | a × b | = |a| * |b| * sin(ø)</font>
00224 <font class="comment">    */</font>
00225       <a class="code" href="classVECTOR.html">VECTOR</a> vec3;
00226       vec3.<a class="code" href="classVECTOR.html#m0">x</a> = vec1.<a class="code" href="classVECTOR.html#m1">y</a> * vec2.<a class="code" href="classVECTOR.html#m2">z</a> - vec1.<a class="code" href="classVECTOR.html#m2">z</a> * vec2.<a class="code" href="classVECTOR.html#m1">y</a>;
00227       vec3.<a class="code" href="classVECTOR.html#m1">y</a> = vec1.<a class="code" href="classVECTOR.html#m2">z</a> * vec2.<a class="code" href="classVECTOR.html#m0">x</a> - vec1.<a class="code" href="classVECTOR.html#m0">x</a> * vec2.<a class="code" href="classVECTOR.html#m2">z</a>;
00228       vec3.<a class="code" href="classVECTOR.html#m2">z</a> = vec1.<a class="code" href="classVECTOR.html#m0">x</a> * vec2.<a class="code" href="classVECTOR.html#m1">y</a> - vec1.<a class="code" href="classVECTOR.html#m1">y</a> * vec2.<a class="code" href="classVECTOR.html#m0">x</a>;
00229       <font class="keywordflow">return</font> vec3;
00230 }
00231 
<a name="l00232"></a><a class="code" href="locmath_8cpp.html#a7">00232</a> <font class="keywordtype">void</font> <a class="code" href="locmath_8cpp.html#a7">EulerToQuat</a>(<font class="keywordtype">float</font> roll, <font class="keywordtype">float</font> pitch, <font class="keywordtype">float</font> yaw, <a class="code" href="classQUAT.html">QUAT</a> * quat)
00233 {
00234     <font class="comment">/*</font>
00235 <font class="comment">    Euler Angle to Quarternion.</font>
00236 <font class="comment"></font>
00237 <font class="comment">    q = qyaw qpitch qroll where:</font>
00238 <font class="comment"></font>
00239 <font class="comment">    qyaw = [cos(f /2), (0, 0, sin(f /2)]</font>
00240 <font class="comment">    qpitch = [cos (q/2), (0, sin(q/2), 0)]</font>
00241 <font class="comment">    qroll = [cos (y/2), (sin(y/2), 0, 0)]</font>
00242 <font class="comment">    */</font>
00243     <font class="keywordtype">float</font> cr, cp, cy, sr, sp, sy, cpcy, spsy;  <font class="comment">// calculate trig identities</font>
00244         cr = cos(roll/2);
00245     cp = cos(pitch/2);
00246         cy = cos(yaw/2);
00247         sr = sin(roll/2);
00248     sp = sin(pitch/2);
00249         sy = sin(yaw/2);
00250         cpcy = cp * cy;
00251         spsy = sp * sy;
00252     quat-&gt;<a class="code" href="classQUAT.html#m3">w</a> = cr * cpcy + sr * spsy;
00253         quat-&gt;<a class="code" href="classQUAT.html#m0">x</a> = sr * cpcy - cr * spsy;
00254     quat-&gt;<a class="code" href="classQUAT.html#m1">y</a> = cr * sp * cy + sr * cp * sy;
00255         quat-&gt;<a class="code" href="classQUAT.html#m2">z</a> = cr * cp * sy - sr * sp * cy;
00256 }
00257 
<a name="l00258"></a><a class="code" href="locmath_8cpp.html#a8">00258</a> <font class="keywordtype">float</font> <a class="code" href="locmath_8cpp.html#a8">MagnitudeQuat</a>(<a class="code" href="classQUAT.html">QUAT</a> q1)
00259 {
00260       <font class="keywordflow">return</font>( sqrt(q1.<a class="code" href="classQUAT.html#m3">w</a>*q1.<a class="code" href="classQUAT.html#m3">w</a>+q1.<a class="code" href="classQUAT.html#m0">x</a>*q1.<a class="code" href="classQUAT.html#m0">x</a>+q1.<a class="code" href="classQUAT.html#m1">y</a>*q1.<a class="code" href="classQUAT.html#m1">y</a>+q1.<a class="code" href="classQUAT.html#m2">z</a>*q1.<a class="code" href="classQUAT.html#m2">z</a>));
00261 }
00262 
<a name="l00263"></a><a class="code" href="locmath_8cpp.html#a9">00263</a> <a class="code" href="classQUAT.html">QUAT</a> <a class="code" href="locmath_8cpp.html#a9">NormaliseQuat</a>(<a class="code" href="classQUAT.html">QUAT</a> q1)
00264 {
00265       <a class="code" href="classQUAT.html">QUAT</a> q2;
00266       <font class="keywordtype">float</font> Mag;
00267       Mag = <a class="code" href="locmath_8cpp.html#a8">MagnitudeQuat</a>(q1);
00268       q2.<a class="code" href="classQUAT.html#m3">w</a> = q1.<a class="code" href="classQUAT.html#m3">w</a>/Mag;
00269       q2.<a class="code" href="classQUAT.html#m0">x</a> = q1.<a class="code" href="classQUAT.html#m0">x</a>/Mag;
00270       q2.<a class="code" href="classQUAT.html#m1">y</a> = q1.<a class="code" href="classQUAT.html#m1">y</a>/Mag;
00271       q2.<a class="code" href="classQUAT.html#m2">z</a> = q1.<a class="code" href="classQUAT.html#m2">z</a>/Mag;
00272       <font class="keywordflow">return</font> q2;
00273 }
00274 
<a name="l00275"></a><a class="code" href="locmath_8cpp.html#a10">00275</a> <font class="keywordtype">void</font> <a class="code" href="locmath_8cpp.html#a10">QuatToMatrix</a>(<a class="code" href="classQUAT.html">QUAT</a> quat, <font class="keywordtype">float</font> m[16])
00276 {
00277       <font class="keywordtype">float</font> wx, wy, wz, xx, yy, yz, xy, xz, zz, x2, y2, z2;
00278       <font class="comment">// calculate coefficients</font>
00279       x2 = quat.<a class="code" href="classQUAT.html#m0">x</a> + quat.<a class="code" href="classQUAT.html#m0">x</a>;
00280       y2 = quat.<a class="code" href="classQUAT.html#m1">y</a> + quat.<a class="code" href="classQUAT.html#m1">y</a>;
00281       z2 = quat.<a class="code" href="classQUAT.html#m2">z</a> + quat.<a class="code" href="classQUAT.html#m2">z</a>;
00282       xx = quat.<a class="code" href="classQUAT.html#m0">x</a> * x2;
00283       xy = quat.<a class="code" href="classQUAT.html#m0">x</a> * y2;
00284       xz = quat.<a class="code" href="classQUAT.html#m0">x</a> * z2;
00285       yy = quat.<a class="code" href="classQUAT.html#m1">y</a> * y2;
00286       yz = quat.<a class="code" href="classQUAT.html#m1">y</a> * z2;
00287       zz = quat.<a class="code" href="classQUAT.html#m2">z</a> * z2;
00288       wx = quat.<a class="code" href="classQUAT.html#m3">w</a> * x2;
00289       wy = quat.<a class="code" href="classQUAT.html#m3">w</a> * y2;
00290       wz = quat.<a class="code" href="classQUAT.html#m3">w</a> * z2;
00291       m[0] = 1.0 - (yy + zz);
00292       m[1] = xy - wz;
00293       m[2] = xz + wy;
00294       m[3] = 0.0;
00295       m[4] = xy + wz;
00296       m[5] = 1.0 - (xx + zz);
00297       m[6] = yz - wx;
00298       m[7] = 0.0;
00299       m[8] = xz - wy;
00300       m[9] = yz + wx;
00301       m[10] = 1.0 - (xx + yy);
00302       m[11] = 0.0;
00303       m[12] = 0;
00304       m[13] = 0;
00305       m[14] = 0;
00306       m[15] = 1;
00307 }
00308 
<a name="l00309"></a><a class="code" href="locmath_8cpp.html#a11">00309</a> <a class="code" href="classQUAT.html">QUAT</a> <a class="code" href="locmath_8cpp.html#a11">MultQuat</a>(<a class="code" href="classQUAT.html">QUAT</a> q1, <a class="code" href="classQUAT.html">QUAT</a> q2)
00310 {
00311     <font class="comment">/*</font>
00312 <font class="comment">    Multiplication of two Quarternions.</font>
00313 <font class="comment"></font>
00314 <font class="comment">    qq´ = [ww´ - v · v´, v x v´ + wv´ +w´v]</font>
00315 <font class="comment">    ( · is vector dot product and x is vector cross product )</font>
00316 <font class="comment">    */</font>
00317       <a class="code" href="classQUAT.html">QUAT</a> q3;
00318       <a class="code" href="classVECTOR.html">VECTOR</a> vectorq1;
00319       <a class="code" href="classVECTOR.html">VECTOR</a> vectorq2;
00320       vectorq1.<a class="code" href="classVECTOR.html#m0">x</a> = q1.<a class="code" href="classQUAT.html#m0">x</a>;
00321       vectorq1.<a class="code" href="classVECTOR.html#m1">y</a> = q1.<a class="code" href="classQUAT.html#m1">y</a>;
00322       vectorq1.<a class="code" href="classVECTOR.html#m2">z</a> = q1.<a class="code" href="classQUAT.html#m2">z</a>;
00323       vectorq2.<a class="code" href="classVECTOR.html#m0">x</a> = q2.<a class="code" href="classQUAT.html#m0">x</a>;
00324       vectorq2.<a class="code" href="classVECTOR.html#m1">y</a> = q2.<a class="code" href="classQUAT.html#m1">y</a>;
00325       vectorq2.<a class="code" href="classVECTOR.html#m2">z</a> = q2.<a class="code" href="classQUAT.html#m2">z</a>;
00326 
00327       <a class="code" href="classVECTOR.html">VECTOR</a> tempvec1;
00328       <a class="code" href="classVECTOR.html">VECTOR</a> tempvec2;
00329       <a class="code" href="classVECTOR.html">VECTOR</a> tempvec3;
00330       q3.<a class="code" href="classQUAT.html#m3">w</a> = (q1.<a class="code" href="classQUAT.html#m3">w</a>*q2.<a class="code" href="classQUAT.html#m3">w</a>) - <a class="code" href="locmath_8cpp.html#a5">DotProduct</a>(vectorq1, vectorq2);
00331       tempvec1 = <a class="code" href="locmath_8cpp.html#a6">CrossVector</a>(vectorq1, vectorq2);
00332       tempvec2.<a class="code" href="classVECTOR.html#m0">x</a> = q1.<a class="code" href="classQUAT.html#m3">w</a> * q2.<a class="code" href="classQUAT.html#m0">x</a>;
00333       tempvec2.<a class="code" href="classVECTOR.html#m1">y</a> = q1.<a class="code" href="classQUAT.html#m3">w</a> * q2.<a class="code" href="classQUAT.html#m1">y</a>;
00334       tempvec2.<a class="code" href="classVECTOR.html#m2">z</a> = q1.<a class="code" href="classQUAT.html#m3">w</a> * q2.<a class="code" href="classQUAT.html#m2">z</a>;
00335       tempvec3.<a class="code" href="classVECTOR.html#m0">x</a> = q2.<a class="code" href="classQUAT.html#m3">w</a> * q1.<a class="code" href="classQUAT.html#m0">x</a>;
00336       tempvec3.<a class="code" href="classVECTOR.html#m1">y</a> = q2.<a class="code" href="classQUAT.html#m3">w</a> * q1.<a class="code" href="classQUAT.html#m1">y</a>;
00337       tempvec3.<a class="code" href="classVECTOR.html#m2">z</a> = q2.<a class="code" href="classQUAT.html#m3">w</a> * q1.<a class="code" href="classQUAT.html#m2">z</a>;
00338       q3.<a class="code" href="classQUAT.html#m0">x</a> = tempvec1.<a class="code" href="classVECTOR.html#m0">x</a> + tempvec2.<a class="code" href="classVECTOR.html#m0">x</a> + tempvec3.<a class="code" href="classVECTOR.html#m0">x</a>;
00339       q3.<a class="code" href="classQUAT.html#m1">y</a> = tempvec1.<a class="code" href="classVECTOR.html#m1">y</a> + tempvec2.<a class="code" href="classVECTOR.html#m1">y</a> + tempvec3.<a class="code" href="classVECTOR.html#m1">y</a>;
00340       q3.<a class="code" href="classQUAT.html#m2">z</a> = tempvec1.<a class="code" href="classVECTOR.html#m2">z</a> + tempvec2.<a class="code" href="classVECTOR.html#m2">z</a> + tempvec3.<a class="code" href="classVECTOR.html#m2">z</a>;
00341       <font class="keywordflow">return</font> <a class="code" href="locmath_8cpp.html#a9">NormaliseQuat</a>(q3);
00342 }
00343 
<a name="l00344"></a><a class="code" href="locmath_8cpp.html#a12">00344</a> <a class="code" href="classVERTEX.html">VERTEX</a> <a class="code" href="locmath_8cpp.html#a12">GetNorm</a>(<font class="keywordtype">float</font> x1, <font class="keywordtype">float</font> y1, <font class="keywordtype">float</font> z1, <font class="keywordtype">float</font> x2, <font class="keywordtype">float</font> y2, <font class="keywordtype">float</font> z2, <font class="keywordtype">float</font> x3, <font class="keywordtype">float</font> y3, <font class="keywordtype">float</font> z3)
00345 {
00346         <font class="keywordtype">float</font> ux;
00347         <font class="keywordtype">float</font> uy;
00348         <font class="keywordtype">float</font> uz;
00349         <font class="keywordtype">float</font> vx;
00350         <font class="keywordtype">float</font> vy;
00351         <font class="keywordtype">float</font> vz;
00352           <a class="code" href="classVERTEX.html">VERTEX</a> temp_vertex;
00353           ux = x1 - x2;
00354           uy = y1 - y2;
00355           uz = z1 - z2;
00356           vx = x3 - x2;
00357           vy = y3 - y2;
00358           vz = z3 - z2;
00359           temp_vertex.<a class="code" href="classVERTEX.html#m3">nx</a> = (uy*vz)-(vy*uz);
00360           temp_vertex.<a class="code" href="classVERTEX.html#m4">ny</a> = (uz*vx)-(vz*ux);
00361           temp_vertex.<a class="code" href="classVERTEX.html#m5">nz</a> = (ux*vy)-(vx*uy);
00362           <font class="keywordflow">return</font> temp_vertex;
00363 }
00364 
<a name="l00365"></a><a class="code" href="locmath_8cpp.html#a13">00365</a> GLfloat <a class="code" href="locmath_8cpp.html#a13">MagnitudeVector</a>(<a class="code" href="classVECTOR.html">VECTOR</a> vec1)
00366 {
00367   <font class="keywordflow">return</font>(sqrt(vec1.<a class="code" href="classVECTOR.html#m0">x</a>*vec1.<a class="code" href="classVECTOR.html#m0">x</a>+vec1.<a class="code" href="classVECTOR.html#m1">y</a>*vec1.<a class="code" href="classVECTOR.html#m1">y</a>+vec1.<a class="code" href="classVECTOR.html#m2">z</a>*vec1.<a class="code" href="classVECTOR.html#m2">z</a>));
00368 }
00369 
<a name="l00370"></a><a class="code" href="locmath_8cpp.html#a14">00370</a> <a class="code" href="classVECTOR.html">VECTOR</a> <a class="code" href="locmath_8cpp.html#a14">GetUnitVector</a>(<a class="code" href="classVECTOR.html">VECTOR</a> vector)
00371 {
00372         <font class="comment">// Reduces a normal vector specified as a set of three coordinates,</font>
00373         <font class="comment">// to a unit normal vector of length one.</font>
00374 
00375         <font class="comment">// Calculate the length of the vector           </font>
00376         <font class="keywordtype">float</font> length = (float) sqrt(( vector.<a class="code" href="classVECTOR.html#m0">x</a> * vector.<a class="code" href="classVECTOR.html#m0">x</a>) + 
00377                                                         ( vector.<a class="code" href="classVECTOR.html#m1">y</a> * vector.<a class="code" href="classVECTOR.html#m1">y</a>) +
00378                                                         ( vector.<a class="code" href="classVECTOR.html#m2">z</a> * vector.<a class="code" href="classVECTOR.html#m2">z</a>) );
00379 
00380         <font class="comment">// Keep the program from blowing up by providing an exceptable</font>
00381         <font class="comment">// value for vectors that may calculated too close to zero.</font>
00382         <font class="keywordflow">if</font>(length == 0.0f)
00383                 length = 1.0f;
00384 
00385         <font class="comment">// Dividing each element by the length will result in a</font>
00386         <font class="comment">// unit normal vector.</font>
00387         vector.<a class="code" href="classVECTOR.html#m0">x</a> /= length;
00388         vector.<a class="code" href="classVECTOR.html#m1">y</a> /= length;
00389         vector.<a class="code" href="classVECTOR.html#m2">z</a> /= length;
00390         <font class="keywordflow">return</font> vector;
00391 }
00392 
<a name="l00393"></a><a class="code" href="locmath_8cpp.html#a15">00393</a> <a class="code" href="classVECTOR.html">VECTOR</a> <a class="code" href="locmath_8cpp.html#a15">GetEdgeVector</a>(<a class="code" href="classVECTOR.html">VECTOR</a> point1, <a class="code" href="classVECTOR.html">VECTOR</a> point2)
00394 {
00395   <a class="code" href="classVECTOR.html">VECTOR</a> temp_vector;
00396   temp_vector.<a class="code" href="classVECTOR.html#m0">x</a> = point1.<a class="code" href="classVECTOR.html#m0">x</a> - point2.<a class="code" href="classVECTOR.html#m0">x</a>;
00397   temp_vector.<a class="code" href="classVECTOR.html#m1">y</a> = point1.<a class="code" href="classVECTOR.html#m1">y</a> - point2.<a class="code" href="classVECTOR.html#m1">y</a>;
00398   temp_vector.<a class="code" href="classVECTOR.html#m2">z</a> = point1.<a class="code" href="classVECTOR.html#m2">z</a> - point2.<a class="code" href="classVECTOR.html#m2">z</a>;
00399   <font class="keywordflow">return</font> temp_vector;
00400 }
</pre></div><hr><address align="right"><small>Generated on Thu Feb 9 04:21:43 2006 for Basic ODE Example by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.15 </small></address>
</body>
</html>
